---
layout: layout
title: "Scabral"
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Viewport meta tag for mobile responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CinzaLua</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    body { margin: 0; padding: 0; }
    /* Center the canvas in the browser window */
    canvas { 
      display: block; 
      margin: 0 auto; 
    }
  </style>
</head>
<body>
  <script>
    let nodes = [];
    // Use dynamic canvas sizes with maximum dimensions for larger screens.
    let canvasWidth = Math.min(window.innerWidth, 800);
    let canvasHeight = Math.min(window.innerHeight, 600);
    let selectedNode = null;
    let hoveredNode = null;

    // Node class to hold branch data and text box dimensions for wrapping
    class Node {
      constructor(label, link, x, y, parent = null, textBoxWidth = 150, textBoxHeight = 40) {
        this.label = label;
        this.link = link;
        this.x = x;
        this.y = y;
        this.parent = parent;
        this.children = [];
        this.radius = 5; // Small circle for the node
        this.textBoxWidth = textBoxWidth;
        this.textBoxHeight = textBoxHeight;
      }
      
      // Check if mouse is over this node
      isMouseOver(mx, my) {
        // Create a slightly larger hit area for easier selection
        let hitRadius = this.radius + 40;
        return dist(mx, my, this.x, this.y) < hitRadius;
      }
      
      // Draw the node and its wrapped label
      display() {
        textWrap(WORD);
        textSize(16);
        // Draw node point with red fill on hover
        if (this === hoveredNode) {
          fill('red');
        } else {
          fill(200);
        }
        noStroke();
        ellipse(this.x, this.y, this.radius * 2);
        
        // Draw the label with wrapping (centered above the node)
        textAlign(CENTER, TOP);
        if (this === hoveredNode) {
          fill('red');
        } else {
          fill(0);
        }
        text(this.label, this.x - this.textBoxWidth/2, this.y - 20, this.textBoxWidth, this.textBoxHeight);
        
        // Change cursor if hovering over the node
        if (this === hoveredNode) {
          cursor(HAND);
        }
      }
    }

    function setup() {
      createCanvas(canvasWidth, canvasHeight);
      textWrap(WORD);
      
      // Create the "Me" node with a long, wrapped label linking to "about.html"
      let research = new Node(
        "Me, a researcher, digital tool maker, and passionate about all things making.",
        "about.html",
        canvasWidth / 2,
        50,
        null,
        250, // textBoxWidth
        60   // textBoxHeight
      );
      nodes.push(research);
      
      // First-level nodes: "Industry" and "Academic"
      let industry = new Node("Industry", "https://www.example.com/industry", canvasWidth / 3, 200, research);
      let academic = new Node("Academic", "https://www.example.com/academic", 2 * canvasWidth / 3, 200, research);
      nodes.push(industry, academic);
      research.children.push(industry, academic);
      
      // Example additional branches under Industry
      let indBranch1 = new Node("Cinza Lua", "https://www.example.com/industry1", canvasWidth / 4, 440, industry);
      let indBranch2 = new Node("FixAI", "https://www.example.com/industry2", canvasWidth / 2.75, 350, industry);
      let indBranch3 = new Node("Industry Research", "https://www.example.com/industry2", canvasWidth / 5, 380, industry);
      nodes.push(indBranch1, indBranch2, indBranch3);
      industry.children.push(indBranch1, indBranch2, indBranch3);
      
      // Example additional branches under Academic
      let acadBranch1 = new Node("Electronics", "https://www.example.com/academic1", 2 * canvasWidth / 3.5, 350, academic);
      let acadBranch2 = new Node("Materials Engineering", "https://www.example.com/academic1", 2 * canvasWidth / 3.00, 400, academic);
      let acadBranch3 = new Node("Computer Vision, ML, AI", "https://www.example.com/academic1", 2 * canvasWidth / 2.5, 480, academic);
      let acadBranch4 = new Node("Digital Tools", "https://www.example.com/academic1", 2 * canvasWidth / 2.25, 380, academic);
      let acadBranch5 = new Node("Robotics", "https://www.example.com/academic1", 2 * canvasWidth / 2.15, 350, academic);
      nodes.push(acadBranch1, acadBranch2, acadBranch3, acadBranch4, acadBranch5);
      academic.children.push(acadBranch1, acadBranch2, acadBranch3, acadBranch4, acadBranch5);
    }

    function draw() {
      background(255);
      cursor(ARROW); // Reset cursor
      
      // Draw BÃ©zier curves between each parent and child node
      stroke(0);
      strokeWeight(1);
      noFill();
      nodes.forEach(child => {
        if (child.parent) {
          let startX = child.parent.x;
          let startY = child.parent.y;
          let endX = child.x;
          let endY = child.y;
          // Control points for a smooth curve
          let cp1X = startX;
          let cp1Y = (startY + endY) / 2;
          let cp2X = endX;
          let cp2Y = (startY + endY) / 2;
          bezier(startX, startY, cp1X, cp1Y, cp2X, cp2Y, endX, endY);
        }
      });
      
      // Check for hovering over nodes
      hoveredNode = null;
      for (let i = nodes.length - 1; i >= 0; i--) {
        if (nodes[i].isMouseOver(mouseX, mouseY)) {
          hoveredNode = nodes[i];
          break;
        }
      }
      
      // Display all nodes
      nodes.forEach(node => node.display());
    }
    
    // Mouse pressed for dragging nodes
    function mousePressed() {
      for (let i = nodes.length - 1; i >= 0; i--) {
        if (nodes[i].isMouseOver(mouseX, mouseY)) {
          selectedNode = nodes[i];
          return false;
        }
      }
      return false;
    }
    
    // Mouse dragged for moving nodes
    function mouseDragged() {
      if (selectedNode) {
        selectedNode.x = mouseX;
        selectedNode.y = mouseY;
      }
      return false;
    }
    
    // Mouse released resets selection
    function mouseReleased() {
      selectedNode = null;
      return false;
    }
    
    // Mouse clicked navigates to the link of the hovered node
    function mouseClicked() {
      if (hoveredNode) {
        // Navigate to the node's link
        window.location.href = hoveredNode.link;
      }
      return false;
    }
    
    // Responsive canvas: adjust size on window resize
    function windowResized() {
      canvasWidth = Math.min(window.innerWidth, 800);
      canvasHeight = Math.min(window.innerHeight, 600);
      resizeCanvas(canvasWidth, canvasHeight);
    }
  </script>
</body>
</html>
