---
layout: layout
title: "Scabral"
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- Viewport meta tag for mobile responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CinzaLua</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.6.0/p5.min.js"></script>
  <style>
    body { margin: 0; padding: 0; }
    /* Center the canvas in the browser window */
    canvas { 
      display: block; 
      margin: 0 auto; 
    }
    /* Modal (popup gallery) styles */
    .modal {
      display: none; /* Hidden by default */
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.6);
    }
    .modal-content {
      background-color: #fefefe;
      margin: 5% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 90%;
      max-width: 600px;
      text-align: center;
    }
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    .close:hover,
    .close:focus {
      color: black;
      margin-right: 30px;
      text-decoration: none;
    }
    /* Gallery image styling */
    .gallery-img {
      max-width: 100%;
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <!-- Modal Popup for Gallery -->
  <div id="galleryModal" class="modal">
    <div class="modal-content">
      <span id="closeModal" class="close">&times;</span>
      <div id="galleryContent">
        <!-- Gallery content will be injected here -->
      </div>
    </div>
  </div>
  
  <script>
    let nodes = [];
    // Use dynamic canvas sizes with maximum dimensions for larger screens.
    let canvasWidth = Math.min(window.innerWidth, 800);
    let canvasHeight = Math.min(window.innerHeight, 600);
    let selectedNode = null;
    let hoveredNode = null;

    // Node class to hold branch data plus an optional gallery
    class Node {
      constructor(label, link, x, y, parent = null, textBoxWidth = 150, textBoxHeight = 40, galleryContent = null) {
        this.label = label;
        this.link = link;
        this.x = x;
        this.y = y;
        this.parent = parent;
        this.children = [];
        this.radius = 5; // Small circle for the node
        this.textBoxWidth = textBoxWidth;
        this.textBoxHeight = textBoxHeight;
        this.galleryContent = galleryContent; // Optional HTML string for a gallery
        this.touchRadius = 40; // Larger hit area for mobile touches
      }
      
      // Check if mouse/touch is over this node
      isMouseOver(mx, my) {
        // Create a larger hit area specifically for easier selection on mobile
        return dist(mx, my, this.x, this.y) < this.touchRadius;
      }
      
      // Draw the node and its wrapped label
      display() {
        textWrap(WORD);
        textSize(16);
        // Draw node point with red fill on hover
        if (this === hoveredNode) {
          fill('red');
        } else {
          fill(200);
        }
        noStroke();
        ellipse(this.x, this.y, this.radius * 2);
        
        // Draw the label with wrapping (centered above the node)
        textAlign(CENTER, TOP);
        if (this === hoveredNode) {
          fill('red');
        } else {
          fill(0);
        }
        text(this.label, this.x - this.textBoxWidth/2, this.y - 20, this.textBoxWidth, this.textBoxHeight);
        
        // Change cursor if hovering over the node
        if (this === hoveredNode) {
          cursor(HAND);
        }
      }
    }

    function setup() {
      createCanvas(canvasWidth, canvasHeight);
      textWrap(WORD);
      
      // Create the "Me" node with a long, wrapped label linking to "about.html"
      let research = new Node(
        "Me, a researcher, digital tool maker, and passionate about all things making.",
        "about.html",
        canvasWidth / 2,
        50,
        null,
        250,
        60
      );
      nodes.push(research);
      
      // First-level nodes: "Industry" and "Academic"
      let industry = new Node("Industry", "cinzalua.html", canvasWidth / 3, 200, research);
      let academic = new Node("Academic", "academic_2.html", 2 * canvasWidth / 3, 200, research);
      nodes.push(industry, academic);
      research.children.push(industry, academic);
      
      // Example additional branches under Industry
      let indBranch1 = new Node("Cinza Lua", "cinzalua.html", canvasWidth / 4, 440, industry);
      let indBranch2 = new Node("FixAI", "https://www.fixai.tech/", canvasWidth / 2.75, 350, industry);
      let indBranch3 = new Node("Industry Research", "https://www.research.autodesk.com/blog/from-walls-to-resources-early-results-in-ai-powered-building-deconstruction-planning/", canvasWidth / 5, 380, industry);
      nodes.push(indBranch1, indBranch2, indBranch3);
      industry.children.push(indBranch1, indBranch2, indBranch3);
      
      // Example additional branches under Academic with different gallery content
      let acadBranch1 = new Node("Electronics", "https://www.cinzalua.com/ps70/", 2 * canvasWidth / 3.5, 350, academic);
      
      // This node will display a gallery when clicked
      let acadBranch2 = new Node(
        "Materials Engineering", 
        "https://www.example.com/academic1", 
        2 * canvasWidth / 3.00, 
        400, 
        academic,
        150,
        40,
        `<h2></h2>
         <img class="gallery-img" src="static/imgs/materials/Cabral_Sophia_Portfolio_ 20256.jpg" alt="Materials 1">
         <img class="gallery-img" src="static/imgs/materials/samples6.jpg" alt="Materials 2">`
      );
      
      let acadBranch3 = new Node(
        "Computer Vision, ML, AI", 
        "https://www.example.com/academic1", 
        2 * canvasWidth / 2.5, 
        480, 
        academic,
        150,
        40,
        `<h2></h2>
         <img class="gallery-img" src="static/imgs/ai_ml_cv/Cabral_Sophia_Portfolio_ 20254.jpg" alt="CV 1">
         <img class="gallery-img" src="static/imgs/ai_ml_cv/Cabral_Sophia_Portfolio_ 20255.jpg" alt="CV 2">
         `
      );
      
      let acadBranch4 = new Node(
        "Digital Tools", 
        "https://www.example.com/academic1", 
        2 * canvasWidth / 2.25, 
        380, 
        academic,
        150,
        40,
        `<p></p>
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 20257.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 20258.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 20259.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 202510.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 202511.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 202521.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 202522.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 202523.jpg" alt="Digital Tool 1">
         <img class="gallery-img" src="static/imgs/computer_tools/Cabral_Sophia_Portfolio_ 202524.jpg" alt="Digital Tool 1">`

      );
      
      let acadBranch5 = new Node("Digital Fabrication", "http://acadia.org/news/NCXCRV", 2 * canvasWidth / 2.15, 350, academic);
      nodes.push(acadBranch1, acadBranch2, acadBranch3, acadBranch4, acadBranch5);
      academic.children.push(acadBranch1, acadBranch2, acadBranch3, acadBranch4, acadBranch5);
    }

    function draw() {
      background(255);
      cursor(ARROW);
      
      // Draw BÃ©zier curves between each parent and child node
      stroke(0);
      strokeWeight(1);
      noFill();
      nodes.forEach(child => {
        if (child.parent) {
          let startX = child.parent.x;
          let startY = child.parent.y;
          let endX = child.x;
          let endY = child.y;
          let cp1X = startX;
          let cp1Y = (startY + endY) / 2;
          let cp2X = endX;
          let cp2Y = (startY + endY) / 2;
          bezier(startX, startY, cp1X, cp1Y, cp2X, cp2Y, endX, endY);
        }
      });
      
      // Check for hovering over nodes (works for both mouse and touch)
      hoveredNode = null;
      const checkX = touches[0]?.x || mouseX;
      const checkY = touches[0]?.y || mouseY;
      
      for (let i = nodes.length - 1; i >= 0; i--) {
        if (nodes[i].isMouseOver(checkX, checkY)) {
          hoveredNode = nodes[i];
          break;
        }
      }
      
      nodes.forEach(node => node.display());
    }
    
    // Mouse pressed for dragging nodes
    function mousePressed() {
      for (let i = nodes.length - 1; i >= 0; i--) {
        if (nodes[i].isMouseOver(mouseX, mouseY)) {
          selectedNode = nodes[i];
          return false;
        }
      }
      return false;
    }
    
    // Mouse dragged for moving nodes
    function mouseDragged() {
      if (selectedNode) {
        selectedNode.x = mouseX;
        selectedNode.y = mouseY;
      }
      return false;
    }
    
    // Mouse released resets selection
    function mouseReleased() {
      selectedNode = null;
      return false;
    }
    
    // Mouse clicked: if node has galleryContent, show modal; else, navigate
    function mouseClicked() {
      // Only proceed if we're not on a touch device
      if (navigator.maxTouchPoints === 0) {
        if (hoveredNode) {
          if (hoveredNode.galleryContent) {
            openGalleryModal(hoveredNode.galleryContent);
          } else {
            window.location.href = hoveredNode.link;
          }
        }
      }
      return false; // Prevent default behavior
    }
    
    // Touch event handlers for mobile
    function touchStarted() {
      for (let i = nodes.length - 1; i >= 0; i--) {
        if (nodes[i].isMouseOver(touches[0]?.x || mouseX, touches[0]?.y || mouseY)) {
          selectedNode = nodes[i];
          return false; // Prevent default behavior
        }
      }
      return false;
    }
    
    function touchMoved() {
      if (selectedNode) {
        selectedNode.x = touches[0]?.x || mouseX;
        selectedNode.y = touches[0]?.y || mouseY;
      }
      return false; // Prevent default behavior
    }
    
    function touchEnded() {
      if (selectedNode) {
        // We were dragging a node, not clicking
        selectedNode = null;
        return false;
      }
      
      // Check if we're touching a node
      for (let i = nodes.length - 1; i >= 0; i--) {
        if (nodes[i].isMouseOver(touches[0]?.x || mouseX, touches[0]?.y || mouseY)) {
          if (nodes[i].galleryContent) {
            openGalleryModal(nodes[i].galleryContent);
          } else {
            window.location.href = nodes[i].link;
          }
          return false; // Prevent default behavior
        }
      }
      return false;
    }
    
    // Responsive canvas: adjust size on window resize
    function windowResized() {
      canvasWidth = Math.min(window.innerWidth, 800);
      canvasHeight = Math.min(window.innerHeight, 600);
      resizeCanvas(canvasWidth, canvasHeight);
    }
    
    // Modal gallery functions
    function openGalleryModal(content) {
      let modal = document.getElementById("galleryModal");
      document.getElementById("galleryContent").innerHTML = content;
      modal.style.display = "block";
    }
    
    function closeGalleryModal() {
      let modal = document.getElementById("galleryModal");
      modal.style.display = "none";
    }
    
    // Set up event listeners for the modal close
    document.addEventListener("DOMContentLoaded", function() {
      document.getElementById("closeModal").addEventListener("click", closeGalleryModal);
      window.addEventListener("click", function(event) {
        let modal = document.getElementById("galleryModal");
        if (event.target === modal) {
          closeGalleryModal();
        }
      });
    });
  </script>
</body>
</html>